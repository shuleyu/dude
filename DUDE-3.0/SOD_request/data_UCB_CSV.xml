<sod>
    <eventArm>
        <CSVEventSource>
           <filename>events.csv</filename>
        </CSVEventSource>
    </eventArm>
    <networkArm>
        <networkFinder>
            <name>NCEDC_NetworkDC</name>
            <dns>edu/berkeley/geo</dns>
        </networkFinder>

        <networkOR>
            <networkCode>BK</networkCode>
        </networkOR> 

        <channelOR>
         <channelCode>BH*</channelCode> 
<!--            <channelCode>HH*</channelCode> -->
        </channelOR>
        <printlineChannelProcess>
            <template>$station.getLongitude(' ##0.0000;-##0.0000') $station.getLatitude(' ##0.0000;-##0.0000') $station.getElevation('###0.') ${network.code}.${station.code}.${site.code}.$channel.code $channel.azimuth $channel.dip $channel.start $channel.end</template>
        </printlineChannelProcess>
    </networkArm>
    <waveformVectorArm>
        <removeStationDuplicate>
            <maxDistance>
                <value>10</value>
                <unit>KILOMETER</unit>
            </maxDistance>
        </removeStationDuplicate>
        <bestChannelAtStation/>
        <phaseRequest>
            <beginPhase>ttp</beginPhase>
            <beginOffset>
                <unit>MINUTE</unit>
                <value>-5</value>
            </beginOffset>
            <endPhase>ttp</endPhase>
            <endOffset>
                <unit>MINUTE</unit>
                <value>75</value>
            </endOffset>
        </phaseRequest>
        <fixedDataCenter>
           <name>NCEDC_DataCenter</name> 
           <dns>edu/berkeley/geo</dns>
        </fixedDataCenter>
        <subrequestCoverage>
         <phaseRequest>
           <beginPhase>ttp</beginPhase>
           <beginOffset>
               <unit>MINUTE</unit><value>5</value>
           </beginOffset>
           <endPhase>ttp</endPhase>
           <endOffset>
               <unit>MINUTE</unit><value>9</value>
           </endOffset>
         </phaseRequest>
        </subrequestCoverage>
        <merge/>
        <collapseOverlaps/>
        <rMean/>
        <rTrend/>
        <taper/>
        <transferResponse>
            <lowCut>0.001</lowCut>
            <lowPass>0.005</lowPass>
            <highPass>1e5</highPass>
            <highCut>1e6</highCut>
        </transferResponse>
        <rotateGCP/>
        <sacWriter>
            <workingDir></workingDir>
            <location>seismograms/${event.getTime('yyyyMMddHHmm')}/${event.getTime('yyyyMMddHHmm')}.${net.code}.${station.code}.${channel.code}${index}.sac</location>
           <phaseTimeHeader>
               <model>prem</model>
               <phaseName>P</phaseName>
               <tHeader>0</tHeader>
           </phaseTimeHeader> 
           <phaseTimeHeader>
               <model>prem</model>
               <phaseName>Pdiff</phaseName>
               <tHeader>0</tHeader>
           </phaseTimeHeader>
           <phaseTimeHeader>
               <model>prem</model>
               <phaseName>pP</phaseName>
               <tHeader>1</tHeader>
           </phaseTimeHeader> 
           <phaseTimeHeader>
               <model>prem</model>
               <phaseName>S</phaseName>
               <tHeader>2</tHeader>
           </phaseTimeHeader> 
           <phaseTimeHeader>
               <model>prem</model>
               <phaseName>Sdiff</phaseName>
               <tHeader>2</tHeader>
           </phaseTimeHeader>
           <phaseTimeHeader>
               <model>prem</model>
               <phaseName>sS</phaseName>
               <tHeader>3</tHeader>
           </phaseTimeHeader> 
           <phaseTimeHeader>
               <model>prem</model>
               <phaseName>PP</phaseName>
               <tHeader>4</tHeader>
           </phaseTimeHeader> 
           <phaseTimeHeader>
               <model>prem</model>
               <phaseName>SS</phaseName>
               <tHeader>5</tHeader>
           </phaseTimeHeader> 
           <phaseTimeHeader>
               <model>prem</model>
               <phaseName>SKKS</phaseName>
               <tHeader>6</tHeader>
           </phaseTimeHeader>
           <phaseTimeHeader>
               <model>prem</model>
               <phaseName>PKP</phaseName>
               <tHeader>7</tHeader>
           </phaseTimeHeader>
           <phaseTimeHeader>
               <model>prem</model>
               <phaseName>SKS</phaseName>
               <tHeader>8</tHeader>
           </phaseTimeHeader> 
           <phaseTimeHeader>
               <model>prem</model>
               <phaseName>ScS</phaseName>
               <tHeader>9</tHeader>
           </phaseTimeHeader> 
        </sacWriter>
        <ORWaveformProcessWrapper>
            <seismogramAND>
                <printlineSeismogramProcess>
                    <template>${channel.station.code} ${net.code} $channel.station.getDist($event)  $channel.station.getAz($event) $channel.station.getBaz($event) $channel.station.latitude $channel.station.longitude $event.latitude $event.longitude $event.depth $event.magnitudeType $event.magnitudeValue $event.catalog ${event.getTime('yyyyMMddHHmm')}</template>
                    <filename>seismograms/${event.getTime('yyyyMMddHHmm')}/eventStation.${event.getTime('yyyyMMddHHmm')}</filename>
                </printlineSeismogramProcess>
            </seismogramAND>
        </ORWaveformProcessWrapper>
        <printlineSeismogramProcess>
        </printlineSeismogramProcess>
    </waveformVectorArm>
</sod>

